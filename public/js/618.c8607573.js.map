{"version":3,"file":"js/618.c8607573.js","mappings":"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","sources":["webpack://starter-kit/./src/pages/Register.vue","webpack://starter-kit/./src/pages/Register.vue?2c73"],"sourcesContent":["<template>\r\n  <div class=\"row justify-content-center\" dir=\"rtl\">\r\n    <div class=\"col-md-6\">\r\n      <div class=\"card shadow-sm mt-5\">\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title text-center mb-3\">تسجيل حساب جديد فى منصة واتسابكو</h5>\r\n\r\n          <!-- الخطوة الأولى: تسجيل البيانات -->\r\n          <form v-if=\"!otpSent\" @submit.prevent=\"onRegister\">\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\">الاسم الكامل</label>\r\n              <input\r\n                v-model=\"name\"\r\n                type=\"text\"\r\n                class=\"form-control text-end\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <vue-tel-input v-bind=\"bindProps\" v-model=\"phone\"></vue-tel-input>\r\n\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\">البريد الإلكتروني</label>\r\n              <input\r\n                v-model=\"email\"\r\n                type=\"email\"\r\n                class=\"form-control text-end\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\">كلمة المرور</label>\r\n              <input\r\n                v-model=\"password\"\r\n                type=\"password\"\r\n                class=\"form-control text-end\"\r\n                required\r\n                minlength=\"6\"\r\n              />\r\n            </div>\r\n\r\n            <button class=\"btn btn-success w-100\" :disabled=\"loading\">\r\n              {{ loading ? \"جارٍ الإرسال...\" : \"تسجيل\" }}\r\n            </button>\r\n\r\n            <div v-if=\"error\" class=\"alert alert-danger mt-3 text-center\">\r\n              {{ error }}\r\n            </div>\r\n          </form>\r\n\r\n          <!-- الخطوة الثانية: إدخال OTP -->\r\n          <form v-else @submit.prevent=\"verifyOtp\">\r\n            <div class=\"mb-3 text-center\">\r\n              <h6>تم إرسال رمز التحقق إلى {{ phone }}</h6>\r\n              <label class=\"form-label\">أدخل رمز التحقق (OTP)</label>\r\n              <input\r\n                v-model=\"otp\"\r\n                type=\"text\"\r\n                class=\"form-control text-center\"\r\n                placeholder=\"أدخل الرمز هنا\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <button class=\"btn btn-primary w-100\" :disabled=\"loading\">\r\n              {{ loading ? \"جارٍ التحقق...\" : \"تأكيد الحساب\" }}\r\n            </button>\r\n\r\n            <div v-if=\"error\" class=\"alert alert-danger mt-3 text-center\">\r\n              {{ error }}\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"btn-footer text-center\">\r\n      <a\r\n        class=\"btn btn-lg btn-success\"\r\n        href=\"https://wa.me/201064164068?text=مرحبا%20أريد%20التحدث%20معكم\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        اتصل بنا\r\n      </a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport auth from \"@/services/auth\";\r\nimport { useRoute } from 'vue-router';\r\n\r\nexport default {\r\n  setup() {\r\n    \r\n    const route = useRoute();\r\n    const plan = route.query.plan; \r\n    const name = ref(\"\");\r\n    const phone = ref(\"\");\r\n    const email = ref(\"\");\r\n    const password = ref(\"\");\r\n    const otp = ref(\"\");\r\n    const otpSent = ref(false);\r\n    const error = ref(\"\");\r\n    const loading = ref(false);\r\n    const bindProps = ref({\r\n      placeholder: \"الرجاء إدخال كود الدوله قبل الرقم\",\r\n    });\r\n    const router = useRouter();\r\n\r\n    async function onRegister() {\r\n      error.value = \"\";\r\n      loading.value = true;\r\n      try {\r\n        await auth.sendOtp(phone.value.replace(/\\s+/g, ''), plan);\r\n        otpSent.value = true;\r\n      } catch (err) {\r\n        error.value =\r\n          err.response?.data?.error || err.message || \"فشل إرسال رمز التحقق\";\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    }\r\n\r\n    async function verifyOtp() {\r\n      error.value = \"\";\r\n      loading.value = true;\r\n      try {\r\n        await auth.verifyOtpAndRegister({\r\n          name: name.value,\r\n          phone:  phone.value.replace(/\\s+/g, ''),\r\n          email: email.value,\r\n          password: password.value,\r\n          otp: otp.value,\r\n          plan: otp.plan,\r\n        });\r\n        router.push({ name: \"dashboard\" });\r\n      } catch (err) {\r\n        error.value =\r\n          err.response?.data?.error || err.message || \"رمز التحقق غير صحيح\";\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    }\r\n\r\n    return {\r\n      name,\r\n      phone,\r\n      email,\r\n      password,\r\n      otp,\r\n      otpSent,\r\n      error,\r\n      loading,\r\n      onRegister,\r\n      verifyOtp,\r\n      bindProps,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  border-radius: 12px;\r\n}\r\n\r\n.form-label {\r\n  font-weight: 600;\r\n}\r\n\r\ninput {\r\n  direction: rtl;\r\n  text-align: right;\r\n}\r\n\r\nh5,\r\nh6 {\r\n  font-weight: bold;\r\n}\r\n\r\n.alert {\r\n  font-size: 0.95rem;\r\n}\r\n</style>\r\n","import { render } from \"./Register.vue?vue&type=template&id=f29edc60&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=f29edc60&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f29edc60\"]])\n\nexport default __exports__"],"names":["class","dir","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","$setup","otpSent","onSubmit","_cache","_withModifiers","verifyOtp","apply","arguments","_hoisted_10","_toDisplayString","phone","otp","$event","type","placeholder","required","disabled","loading","_hoisted_11","error","_hoisted_12","onRegister","_hoisted_5","name","_createVNode","_component_vue_tel_input","_mergeProps","bindProps","_hoisted_6","email","_hoisted_7","password","minlength","_hoisted_8","_hoisted_9","href","target","rel","setup","route","useRoute","plan","query","ref","router","useRouter","_onRegister","_asyncToGenerator","_regenerator","m","_callee","_err$response","_t","w","_context","p","n","value","auth","sendOtp","replace","v","response","data","message","f","a","_verifyOtp","_callee2","_err$response2","_t2","_context2","verifyOtpAndRegister","push","__exports__","render"],"sourceRoot":""}